# 12주차 CS 발표

## SQL vs NoSQL

### SQL (관계형 데이터베이스)

SQL을 사용하면 관계형 데이터베이스 관리 시스템(RDBMS)에서 데이터를 저장, 수정, 삭제 및 검색할 수 있음

##### 관계형 데이터베이스의 특징

- 데이터는 **정해진(엄격한) 데이터 스키마에 따라 테이블에 저장됨**

  <img src="https://t1.daumcdn.net/cfile/tistory/99BF063C5C937DF324" alt="img" style="zoom:50%;" />

  - 데이터는 테이블에 레코드로 저장되는데, 각 테이블마다 명확하게 정의된 구조가 있음.</br>
    해당 구조는 필드의 이름과 데이터 유형으로 정의됨
  - 따라서 **스키마를 준수하지 않은 레코드는 테이블에 추가할 수 없음**. 즉, 스키마를 수정하지 않는 이상은 정해진 구조에 맞는 레코드만 추가가 가능하다는 점이 관계형 데이터베이스의 특징 중 하나임

- 데이터는 **관계**를 통해 연결된 **여러 테이블에 분산됨**

  <img src="https://t1.daumcdn.net/cfile/tistory/994D09355C937ECD2D" alt="img" style="zoom:50%;" />

  - 데이터들을 여러개의 테이블에 나눠서, 데이터의 중복을 피할 수 있음
  - 하나의 테이블에서 중복없이 하나의 데이터만을 관리하기 때문에 다른 테이블에서 부정확한 데이터를 다룰 위험이 없음



### NoSQL (비관계형 데이터베이스)

SQL(관계형 데이터베이스)와 반대되는 접근방식을 따름

- 스키마 없음
- 관계 없음



NoSQL에서는 레코드를 문서(documents)라고 부름

- SQL에서는 정해진 스키마를 따르지 않는다면 데이터를 추가할 수 없지만, NoSQL에서는 다른 구조의 데이터를 **같은 컬렉션(=SQL의 테이블 같은 개념)에 추가할 수 있음**

  <img src="https://t1.daumcdn.net/cfile/tistory/99FBC9415C937F2A20" alt="img" style="zoom:50%;" />

- 문서는 JSON 데이터와 비슷한 형태를 가짐 

- 일반적으로 관련 데이터를 동일한 컬렉션에 넣음 (관계형 데이터베이스처럼 여러 테이블에 나누어 담지 않음)

- 따라서 많은 Order(주문한 상품)이 있는 경우, 일반적인 정보를 모두 포함한 데이터를 Orders 컬렉션에 저장함</br>
  즉, 관계형 데이터베이스에서 사용했던 Users, Products 정보 또한 Orders에 포함해서 한꺼번에 저장</br>
  ⇒ 여러 케이블/컬렉션에 Join할 필요 없이 이미 필요한 모든것을 갖춘 문서를 작성하게 됨.

- 실제로 NoSQL에는 Join이라는 개념이 존재하지 않음. 대신 컬렉션을 통해 **데이터를 복제** 하여 각 컬렉션 일부분에 속하는 데이터를 정확하게 산출하도록 함

  <img src="https://t1.daumcdn.net/cfile/tistory/99C57D3B5C937F5E17" alt="img" style="zoom: 50%;" />

  - 데이터가 중복되기 때문에 불안정한 측면이 있음. 특정 데이터를 같이 사용하는 모든 컬렉션에서, 똑같은 데이터 업데이트를 수행되도록 해야함

- 복잡한 조인을 사용할 필요가 없다는 것이 큰 장점. 특히 자주 변경되지 않는 데이터일 때 NoSQL을 쓰면 효율적임



### 수직적(Vertical) & 수평적(Horizontal) 확장(Scaling)

두 종류의 데이터베이를 비교할 때 중요한 Scaling 개념도 존재함

데이터베이스 서버의 확장성은 `수직적` 확장과 `수평적` 확장으로 나뉨

- 수직적 확장 : 단순히 데이터베이스 서버의 성능을 향상 시키는 것

- 수평적 확장 : 더 많은 서버가 추가되고 데이터베이스가 전체적으로 분산됨을 의미함. 따라서 하나의 데이터베이스에서 작동하지만 여러 호스트에서 작동함.

  <img src="https://t1.daumcdn.net/cfile/tistory/990D6E385C937F8530" alt="img" style="zoom:50%;" />

- 데이터가 저장되는 방식 때문에 SQL 데이터베이스는 일반적으로 수직적 확장만을 지원함. 수평적 확장은 NoSQL 데이터베이스에서만 가능함.



### SQL vs NoSQL

SQL과 NoSQL 모두 훌륭한 솔루션임.

어떤 데이터를 다루는지, 어떤 애플리케이션에서 사용되는지 고려하고 선택해야함



#### SQL 장점

- 명확하게 정의된 스키마, 데이터 무결성 보장
- 관계는 각 데이터를 중복없이 한번만 저장

#### SQL 단점

- 덜 유연함. 데이터 스키마를 사전에 계획하고 알려줘야함 (나중에 수정하기 힘듦)
- 관계를 맺고있어서 Join문이 많은 복잡한 쿼리가 만들어질 수 있음
-  수평적 확장이 어렵고, 대체로 수직적 확장만 가능



#### NoSQL 장점

- 스키마가 없어서 유연함. 언제든지 저장된 데이터를 조정하고 새로운 필드 추가 가능
- 데이터는 애플리케이션이 필요로하는 형식으로 저장됨→ 데이터 읽어오는 속도 빨라짐
- 수직 및 수평 확장이 가능하므로 데이터베이스가 애플리케이션에서 발생시키는 모든 읽기/쓰기 요청 처리 가능

#### NoSQL단점

- 유연성으로 인해 데이터 구조 결정을 미루게 될 수 있음
- 데이터 중복은 여러 컬렉션과 문서가 여러개의 레코드가 연결된 경우 업데이트 해야함
- 데이터가 여러 컬렉션에 중복되어있기 때문에 수정 시 모든 컬렉션에서 수행해야함 (SQL에서는 중복 데이터가 없으므로 한번만 수행하면 됨)



#### SQL을 사용하면 좋은 경우

- 관계를 맺고있는 데이터가 자주 변경(수정)되는 애플리케이션일 경우
- 변경될 여지가 없고, 명확한 스키마가 사용자와 데이터에게 중요한 경우

#### NoSQL을 사용하면 좋은 경우

- 정확한 데이터 구조를 알 수 없거나 변경/확장 될 수 있는 경우
- 읽기(read)처리를 자주 하지만, 데이터를 자주 변경(update)하지 않는 경우
- 데이터베이스를 수평적으로 확장해야하는 경우. 즉, 막대한 양의 데이터를 다뤄야하는 경우



하나의 제시 방법이지 완전한 정답이 정해져있는 것은 아님.

SQL을 선택해서 복잡한 Join문을 만들지 않도록 설계하여 단점을 없앨 수도 있고,

NoSQL을 선택해서 중복 데이터를 줄이는 방법으로 설계해서 없앨 수 있음

---

[참고 1] : <https://gyoogle.dev/blog/computer-science/data-base/SQL%20&%20NOSQL.html>

[참고 2] : <https://siyoon210.tistory.com/130>



