## SQL 과 NOSQL의 차이

웹 앱을 개발할 때 데이터베이스를 선택할 때 고민

MySQL 과 같은 SQL을 사용할까 MongoDB와 같은 NoSQL을 사용할까



#### SQL(관계형 데이터베이스)

SQL(Structured Query Language) - 구조화된 쿼리

SQL을 사용하면 관게형 데이터베이스 관리 시스템(RDBMS)에서 데이터를 저장, 수정, 삭제 및 검색 가능

##### 주요 특징

- 데이터는 정해진(엄격한) 데이터 스키마(구조)를 따라 데이터베이스 테이블에 저장

- 데이터는 관계를 통해서 연결된 여러개의 테이블에 분산



##### 엄격한 스키마

데이터는 테이블에 레코드로 저장, 각 테이블은 명확하게 정의된 구조가 있음

구조란 어떤 데이터가 테이블에 들어가고 어떤 데이터가 그렇지 않을지를 정의하는 필드집합

구조는 필드의 이름과 데이터 유형으로 정의

![](https://t1.daumcdn.net/cfile/tistory/99BF063C5C937DF324)

스키마를 지키지 않은 레코드는 추가할 수 없음.

스키마를 수정하지 않고는 데이터를 수정할 수 없음.



##### 관계

데이터들을 여러개의 테이블에 나누어서 데이터 중복을 피함

각 테이블은 다른 테이블에 없는 데이터만 갖고 있음

다른 테이블에서 부정확한 데이터를 다룰 위험이 없음

![](https://t1.daumcdn.net/cfile/tistory/994D09355C937ECD2D)



#### NoSQL (비관계형 데이터 베이스)

SQL과 반대되는 접근 방식

스키마없음

관계없음

레코드를 문서(documents)라고 부름

#### 핵심적인 차이점

NoSQL에서는 다른 구조의 데이터를 같은 컬렉션(SQL에서의 테이블)에 추가할 수 있음

![](https://t1.daumcdn.net/cfile/tistory/99FBC9415C937F2A20)

JSON 데이터와 비슷한 형태를 가짐

여러 테이블/ 콜렉션에 조인할 필요없이 이미 필요한 모든 것을 갖춘 문서를 작성(조인이란 개념이 없음)

데이터가 중복된다는 단점이 있지만 복잡한 순간에 조인을 사용할 필요가 없음.

데이터가 자주 변경되지 않을 경우 큰 장점을 가짐

![](https://t1.daumcdn.net/cfile/tistory/99C57D3B5C937F5E17)



#### 확장(Scaling)

수직적 확장 - 단순히 데이터 베이스 서버의 성능을 향상 시키는 것

수평적 확장 - 더 많은 서버가 추가되고 데이터베이스가 전체적으로 분산됨을 의미, 하나의 데이터베이스에서 작동하지만 여러 호스트에서 작동

SQL은 일반적으로 수직적, NoSQL은 수평적 확장을 지원



#### SQL의 장단점

장점

- 명확하게 정의된 스키마, 데이터 무결성 보장

- 관계는 각 데이터를 중복없이 한번만 저장

단점

- 상대적으로 덜 유연, 데이터 스키마는 사전에 계획되고 나중에 수정하기가 번거롭거나 불가능

- 관계를 맺고 있기 때문에 조인을 자주 사용해 복잡해짐

- 수평적 확장이 어렵고, 대체로 수직적 확장만 가능

사용

관계를 맺고 있는 데이터가 자주 변경되는 앱일 경우

변경될 여지가 없고, 명확한 스키마가 사용자와 데이터에게 중요한 경우



#### NoSQL의 장단점

장점

- 스키마가 없기 때문에 유연함, 언제든 필드를 추가 할 수 있음

- 데이터는 앱이 필요로하는 형식으로 저장, 읽는 속도가 빠름

- 수직, 수평적 확장이 가능하므로 데이터베이스가 앱에서 발생시키는 모든 읽기/ 쓰기 요청을 처리

단점

- 유연성 때문에 데이터 구조 결정을 못할 수 있음

- 데이터 중복은 여러개의 컬렉션, 문서, 레코드가 변경된 경우 업데이트 해야함

- 데이터가 여러 컬렉션에 중복되어 있기 때문에, 수정해야하는 경우 모든 컬렉션에서 해야함.

사용

정확한 데이터 구조를 알 수 없거나 변경/ 확장 될 수 있는 경우

읽기 처리를 자주하지만 데이터를 자주 변경하지 않는 경우

(한번의 변경으로 많은 문서를 업데이트 할 필요없는 경우)

데이터베이스를 수평으로 확장해야 하는 경우



## 이상(Anomaly)

잘못된 테이블 설계로 인해 이상현상이 발생

정규화를 통해 해결

#### 삽입이상

반복된 데이터 중에 일부를 갱신 할 시 데이터의 불일치가 발생

#### 갱신이상

불필요한 정보를 함께 저장하지 않고서는 어떤 정보를 저장하는 것이 불가능 함

#### 삭제이상

필요한 정보를 함꼐 삭제하지 않고서는 어떤 정보를 삭제하는 것이 불가능 함

#### 예시

![](https://dl.dropboxusercontent.com/s/eisx1gc2bsr61xr/%EC%8A%A4%ED%81%AC%EB%A6%B0%EC%83%B7%202018-12-24%2013.17.04.png)



위 테이블은 한 회사의 근무자(employee) 테이블이다. 근무자가 속한 부서(Department), 참여하고 있는 학생 그룹(Student_Group)을 나타낸다.

- 갱신 이상: 만약에 `A. Bruchs`의 부서가 CIS에서 Marketing으로 바뀌었다고 가정해보자. 테이블의 4, 5번째 행의 CIS를 둘 다 바꾸지 않고 하나만 바꾼다면 `A.Bruchs`의 부서는 어느 부서에 속해있는지 알 수 없게 된다.
- 삽입 이상: 새로운 부서 Engineering이 신설되었고 아직 근무자는 없다고 가정해보자. 하지만 이 부서에 관련한 정보는 불필요한 정보를 함께 입력하지 않는 한 위 테이블에 입력할 수 없다.
- 삭제 이상: 만약에 Accounting 부서에 속한 사람이 `J.Longfellow` 단 한 명이라고 가정하자. `J.Longfellow`의 정보(첫번째 행)를 삭제하면 Accounting 부서에 대한 정보도 사라지게 된다.

[참조]

https://siyoon210.tistory.com/130

https://kosaf04pyh.tistory.com/294

https://wkdtjsgur100.github.io/anomaly/