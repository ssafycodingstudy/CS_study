# 7주차 CS 발표

## UDP

#### UDP 통신이란?

- User Datagram Protocol의 약자로, 데이터를 데이터그램 단위로 처리하는 프로토콜

  > 데이터그램 : 독립적인 관계를 지니는 패킷

- 비연결형, 신뢰성 없는 전송 프로토콜. 즉, 연결을 위해 할당되는 논리적인 경로가 없기때문에 각각의 패킷은 다른 경로로 전송되고, 각각의 패킷은 독립적인 관계를 지니고, 데이터를 서로 다른 경로로 독립적으로 처리하게 됨

  <img src="https://t1.daumcdn.net/cfile/tistory/9969973359FEB59309" alt="img" style="zoom:50%;" />

- 데이터그램 단위로 쪼개면서 전송을 해야하기 때문에 전송 계층임

- 전송 계층(Transport layer)에서 사용하는 프로토콜



#### TCP와 UDP

##### 등장 배경

1. IP의 역할은 Host to Host (장치 대 장치)만 지원함. 장치에서 장치로 이동은 IP로 해결되지만, 하나의 장비안에서 수많은 프로그램들이 통신을 할 경우에는 IP만으로 한계가 있음

2. 또한, IP에서 오류가 발생한다면 ICMP에서 알려줌. 하지만 ICMP는 알려주기만 할 뿐 대처를 못하기 때문에 IP보다 위에서 처리를 해줘야함

   > **ICMP**
   >
   > 인터넷 제어 메시지 프로토콜로 네트워크 컴퓨터 위에서 돌아가는 운영체제에서 오류 메시지를 전송받는데 주로 쓰임

- 1번을 해결하기 위하여 포트 번호가 나오게 됐고, 2번을 해결하기 위해 상위 프로토콜인 TCP와 UDP가 나오게 됨

##### 비교

![image](https://user-images.githubusercontent.com/26523814/152816786-9b41dbb8-199e-4fd8-88d4-be370a34f3af.png)



#### UDP 특징

- 비연결형 서비스로 데이터그램 방식을 제공함
- 정보를 주고 받을 때 정보를 보내거나 받는다는 신호절차를 거치지 않음
- UDP헤더의 CheckSum 필드를 통해 최소한의 오류만 검출함
- 신뢰성이 낮음
- TCP보다 속도가 빠름 
- 비연결형 서비스이기때문에, 연결을 설정하고 해제하는 과정이 존재하지 않음. 서로 다른 경로로 독립적으로 처리함에도 패킷에 순서를 부여하여 재조립하거나 흐름 제어 또는 혼잡 제어와 같은 기능도 처리하지 않기에 TCP보다 속도가 빠르며 네트워크 부하가 적다는 장점이 있지만 신뢰성있는 데이터의 전송을 보장하지는 못함. 그렇기 때문에 **실시간 서비스(Streaming)같이 신뢰성보다는 연속성이 중요한 서비스**에 자주 사용됨



#### DNS에서 UDP를 사용하는 이유

##### DNS (Domain Name Service)

사람이 읽은 수 있는 도메인 이름(ex: www.amazone.com) 을 머신이 읽을 수 있는 IP주소(ex: 192.0.2.44)로 변환



##### DNS에서 UDP를 사용하는 이유

UDP는 트랜스포트 계층 프로토콜이 할 수 있는 최소 기능으로 동작.</br>
즉, 다중화 / 역다중화 기능과 간단한 오류 검사 기능을 제외하면 IP에 아무것도 추가하지 않음.</br>
그래서 애플리케이션 개발자가 TCP대신에 UDP를 선택한다면 애플리케이션은 거의 IP와 직접 통신하는 것

- 빠른 속도
  - 연결의 시작과 끝 설정이 없음. 만약 DSN가 TCP 위에서 동작한다면 많이 느려질 것</br>
    반면 http 문서로 된 웹페이지는 신뢰성이 중요하기 때문에 UDP보다  TCP를 사용함
    - DNS : 신뢰성 < 속도
    - 웹페이지 : 신뢰성 > 속도
  - TCP는 데이터 전송을 시작하기 전에 3-way handshake를 사용하는 반면에 UDP는 형식적인 예비 동작이 없음. 따라서 연결 설정에 드는 비용이 없음
  - UDP는 512 bytes를 넘어가지 않는 패킷만 전송이 가능하고 오버헤드가 없어서 속도가 빠름.<br>
    DNS가 전송하는 데이터 패킷 사이즈가 매우 작으므로 UDP가 유리함. <br>
    이때 단순히 패킷의 사이즈가 작다고 DNS가 UDP를 채택한 것은 아니고, 전달하는 패킷의 크기가 작기때문에 신뢰성이 보장되지 않아도 되기 때문 (못받으면 다시 전달하면 됌)
- 연결 상태를 유지할 필요가 없음.
  - UDP는 어떠한 정보도 기록하지 않고 유지할 필요가 없음. 도메인 네임을 IP로 변경함으로 항상 많은 클라이언트를 수용하는 DNS 서버에게는 연결상태를 유지하지 않아 정보 기록을 최소화하는 UDP가 알맞음</br>
    ⇒ 따라서 특정 애플리케이션에 할당된 서버는 애플리케이션이 TCP보다 UDP에서 동작할 때 더 많은 클라이언트를 수용할 수 있음

##### DNS에서 TCP를 사용하는 경우

zone transfer을 사용해야하는 경우에는 TCP를 사용해야함

> zone transfer : DNS 서버간의 요청을 주고 받을 때 사용하는 transfer

만약 데이터가 512 bytes를 넘거나, 응답을 못받은 경우 TCP를 사용함



---

[참고 1] : <https://mangkyu.tistory.com/15>

[참고 2] : <https://gyoogle.dev/blog/computer-science/network/UDP.html>

[참고 3] : <https://aws.amazon.com/ko/route53/what-is-dns/>

[참고 4] : <https://steady-coding.tistory.com/523>
