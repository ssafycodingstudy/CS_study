# 컴퓨터의 구성

하드웨어  : 컴퓨터를 구성하는 물리적 장치

소프트웨어  : 컴퓨터에게 동작 방법을 지시하는 명령어 집합

##### 하드웨어

- 메모리

- 입력과 출력

- 중앙처리장치(CPU)

##### 소프트웨어

- 응용 소프트웨어 : 오피스 제품

- 사용자 소프트웨어 : 워드 프로세서 매크로, 스프레드 시트 템플릿

- 시스템소프트웨어 : 운영체제, 컴파일러



##### 하드웨어

CPU - 컴퓨터 시스템을 통제하고 프로그램의 연산을 실행하고 처리하는 가장 핵심적인 컴퓨터 제어장치

기억장치 

-  컴퓨터에서 데이터(자료)를 일시적으로, 또는 영구히 보존하는 장치
- 주기억장치 : 실행중인 프로그램과 같은 프로그램에 필요한 데이터를 일시적으로 저장
- 보조기억장치 : 많은 자료를 영구히 보관

입출력장치 - 컴퓨터 내부로 자료를 입력하는 장치, 외부로 표현하는 장치



### 중앙처리장치

##### 연산장치

- 산술 연산과 논리연산 수행, 따라서 산술논리연산장치라 부름

- 연산에 필요한 데이터를 레지스터에서 가져오고, 연산 결과를 다시 레지스터로 보냄

##### 제어장치

- 명령어를 순서대로 실행 할 수 있도록 제어하는 장치

- 주기억장치에서 프로그램 명령어를 꺼내 해독하고 그 결과에 따라 명령어 실행에 필요한 제어신호를 기억장치, 연산장치, 입출력장치로 보냄

- 장치가 보낸 신호를 받아, 다음에 수행할 동작을 결정

##### 레지스터

- 고속 기억장치

- 명령어 주소, 코드, 연산에 필요한 데이터, 연산 결과 등을 임시로 저장.

- 용도에 따라 범용 레지스터와 특수목적 레지스터로 구분.

- 중앙처리장치 종류에 따라 사용할 수 있는 레지스터 개수와 크기가 다름

- 범용 레지스터 : 연산에 필요한 데이터나 연산 결과를 임시로 저장

- 특수목적 레지스터 : 특별한 용도로 사용

##### 특수목적 레지스터 중 중요한 것

- 메모리 주소 레지스터(MAR) : 읽기와 쓰기 연산을 수행할 주기억장치 주소 저장

- 프로그램 카운터(PC) : 다음에 수행할 명령어의 주소를 저장

- 명령어 레지스터(IR) : 현재 실행 중인 명령어를 저장

- 메모리 버퍼 레지스터(MBR) : 주기억장치에서 읽어온 데이터나 주기억장치에 저장할 데이터를 임시로 저장

- 누산기(AC) : 연산 결과를 임시로 저장

![CPU](https://github.com/ssafycodingstudy/CS_study/blob/main/img/CPU.PNG?raw=true)

### 중앙처리장치의 동작 과정

1. 주기억장치는 입력장치에서 입력받은 데이터 또는 보조기억장치에 저장된 프로그램을 읽어옴

2. 중앙처리장치는 프로그램을 실행하기 위해 주기억장치에 저장된 프로그램 명령어와 데이터를 읽어와 처리하고 결과를 주기억장치에 저장

3. 주기억장치는 처리 결과를 보조기억장치에 저장하거나 출력장치로 내보냄

4. 제어장치는 1~3 과정에서 명령어가 순서대로 실행 될 수 있도록 각 장치를 제어함



### 명령어 세트

중앙처리장치가 실행할 명령어의 집합

연산자와 피연산자로 이루어짐

##### 연산코드

연산 기능 : 사칙연산, 시프트, 보수 등의 산술연산과 논리곱, 논리합, 부정 등의 논리 연산 수행

제어 기능 : 조건 분기와 무조건 분기 등을 사용하여 명령어의 실행 순서를 제어

데이터 전달 기능 : 레지스터와 레지스터 사이, 레지스터와 주기억장치 사이에서 데이터를 전달

입출력 기능 : 프로그램과 데이터를 주기억장치에 전달하고, 연산 결과는 출력장치로 전달

##### 피연산자

주소 : 기억장치 혹은 레지스터의 주소 저장

숫자/문자 : 숫자는 정수, 고정 소수점 수, 부동 소수점 수 및 각각의 코드로 저장되고 문자는 아스키 코드로 저장

논리 데이터 : 참 또는 거짓을 표현할 때 사용하며 비트나 플래그 등으로 저장



### 명령어 사이클

명령어사이클의 프로세스 및 단계별 활동

![명령어 사이클](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FbJeJCN%2Fbtq3AqhuAvn%2F27bUNk0zGeZI59hcxb4yD0%2Fimg.png)



##### 인출 사이클(fetch cycle) 

주기억장치로부터 수행할 명령어를 CPU로 가져오는 단계

하나의 명령을 수행한 후 다음 명령을 메인 메모리에서 CPU로 꺼내오는 단계

명령어의 피연산자가 간접 주소일 경우  간접 사이클로 진행

명령어의 피연산자가 직접 주소일 경우 직접 사이클로 진행

##### 간접 사이클(indirect cycle)

간접주소 지정이 된 경우 유효주소를 계산하기 위해 주기억장치에 접근하는 단계

명령어에 포함되어 있는 주소를 이용하여, 명령어 실행에 필요한 데이터의 주소를 인출하는 사이클

명령의 실행을 위해 실행 사이클로 진행됨

##### 실행 사이클(execute cycle)

명령의 해독결과 이에 해당하는 타이밍 및 제어신호를 순차적으로 발생시켜 실제로 명령어를 실행하는 단계

명령어 코드를 해독하고, 그 결과에 따라 필요한 연산들을 수행

실행 사이클에서 수행되는 마이크로 연산들은 명령어에 따라 다음

##### 인터럽트 사이클(interrupt cycle)

인터럽트 발생시 인터럽트 처리를 위한 단게

인터럽트에 대한 처리가 완료되면 인출 사이클로 진행됨



### 사이클 동작의 마이크로 연산

![CommandCycle](https://github.com/ssafycodingstudy/CS_study/blob/main/img/CommandCycle.PNG?raw=true)

##### 인출 사이클 동작의 마이크로연산 

```{.no-hightlight}
T0 : MAR <- PC

T1 : MBR <- Memory, PC <- PC + I

T2 : IR <- MBR 
```

T0 : PC의 내용을 MAR에 이동

T1 : MAR에 의하여 지정된 기억장소의 내용을 MBR로 이동하고, PC의 내용을 I만큼 증가

T2 : MBR의 내용을 IR로 이동

##### ADD 명령어 실행 사이클에서의 마이크로 연산

```{.no-hightlight}
T0 : MAR <- IR(Addr)

T1 : MBR <- Memory,

T2 : AC <- AC + MBR
```

T0 : MBR에 저장될 데이터의 기억장치 주소를 MAR로 전송

T1 : 저장할 데이터를 MBR로 이동

T2 : MBR 데이터와 AC의 내용을 더하고, 결과값을 다시 AC에 저장

##### 간접 사이클 동작의 마이크로 연산

```{.no-hightlight}
T0 : MAR <- IR(Address)

T1 : MBR <- Memory

T2 : IR(Address) <- MBR(Address)
```

T0 : 명령어의 주소 필드는 MAR로 이동, 오퍼랜드의 주소 인출을 위해 사용됨

T1 : MAR에 의하여 저장된 기억장소의 내용을 MBR로 이동

T2 : IR의 주소 필드가 MBR로부터 들어오는 주소로 갱신, 따라서 그것은 간접주소가 아닌 직접주소를 가짐

##### 인터럽트 사이클 동작의 마이크로 연산

```{.no-hightlight}
T0 : MBR <- PC

T1 : MAR <- Save - Address, PC <- Routine-Address

T2 : Memory <- (MBR)
```

T0 : PC의 내용이 MBR로 보내져서 인터럽트 수행이 끝난 후 복귀할 때 사용가능하도록 함

T1 : MAR에는 PC의 내용이 저장될 위치의 주소가 적재, PC에는 인터럽트-처리 루틴의 시작주소가 적재

T2 : PC의 이전 값을 가지고 있는 MBR의 내용을 기억장치에 저장





### 시스템 버스

- 하드웨어들이 데이터 및 신호를 주고 받는 물리적인 통로
- ![시스템버스](https://t1.daumcdn.net/cfile/tistory/2430644657A86C3001)



##### 데이터 버스 

- 중앙처리장치와 기타장치사이에서 데이터를 전달하는 통로이다.

- 기억장치와 입출력장치의 명령어를 중앙처리장치를 보내거나 중앙처리장치의 연산결과를 기억장치와 입출력장치로 보내는 양방향 버스이다.

##### 주소버스

- 데이터를 정확히 실어나르기 위해서는 기억장치의 주소를 정해주어야 한다.

- 중앙처리장치, 기억장치, 입출력 장치로 기억장치 주소들을 전달하는 통로이며 단방향 버스이다.

##### 제어버스

- 주소버스와 데이터버스는 모든 장치에 공유되기 때문에 이를 제어할 수단이 필요하다.

- 제어버스는 중앙처리장치, 기억장치, 입출력장치에 제어 신호를 전달하는 통로이며, 양방향 버스이다.

##### 시스템 버스 처리 과정

1. 프로그램 카운터에서 읽기와 쓰기 연산을 수행 할 주 기억장치의 주소를 메모리 주소 레지스터로 보내 저장한다.

2. 주소버스를 이용해 MAR에 저장된 주소를 주 기억장치로 이동시킨다.

3. 주기억장치에서 해당 주소에 알맞은 데이터를 이동시키기 전 제어 버스를 통해 다음 수행해야할 명령어를 프로그램카운터에 저장한다.

4. 알맞은 데이터를 데이터버스를 통해 메모리 버퍼 레지스터에 저장한다.



참조

https://tino1999.tistory.com/57

https://richong.tistory.com/92

https://ndb796.tistory.com/7

https://gyoogle.dev/blog/computer-science/computer-architecture/%EC%BB%B4%ED%93%A8%ED%84%B0%EC%9D%98%20%EA%B5%AC%EC%84%B1.html

