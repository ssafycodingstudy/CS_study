# 17주차 CS 발표

## 함수형 프로그래밍 (Functional Programming)

### 프로그래밍 패러다임

프로그래밍 패러다임(Programming Paradigm)은 크게 아래와 같이 구분

- 명령형 프로그래밍 : 무엇(What)을 할 것이지 나타내기보다 어떻게(How) 할 건지 설명하는 방식
  - 절차지향 프로그래밍: 수행되어야할 순차적인 처리 과정을 포함하는 방식 (C, C++)
  - 객체지향 프로그래밍: 객체들의 집합으로 프로그램의 상호작용을 표현 (C++, Java, C#)
- 선언형 프로그래밍 : 어떻게 할건지 (How)를 나타내기보다 무엇(What)을 할 건지를 설명하는 방식
  - 함수형 프로그래밍 : 순수 함수를 조합하고 소프트웨어를 만드는 방식 (클로저, 하스켈, 리스프)

<img src="https://blog.kakaocdn.net/dn/EjKha/btqUeXDkUpM/54da0e07OWNO5ANhz5Vsu1/img.png" alt="img" style="zoom:33%;" />

### 함수형 프로그래밍의 등장

명령형 프로그래밍을 기반으로 개발했던 개발자들은 개발하는 소프트웨어 크기가 커짐에 따라, 복잡하게 엉켜있는 스파게티 코드를 유지보수하는 것이 힘들다는 것을 깨닫게 됨 → 이를 해결하기 위해 함수형 프로그래밍이라는 프로그래밍 패러다임에 관심

함수형 프로그래밍은 거의 모든 것을 순수 함수로 나누어 문제를 해결하는 기법으로, 작은 문제를 해결하기 위한 함수를 작성하여 **가독성을 높이고 유지보수를 용이**하게 해줌



### 함수형 프로그래밍에 대한 이해

함수형 프로그래밍은 **대입문을 사용하지 않는 프로그래밍**이며, **작은 문제를 해결하기 위한 함수를 작성**함

```java
// 명령형 프로그래밍
for(int i=1; i<10; i++){
  System.out.println(i);
}

// 함수형 프로그래밍 수도 코드
process(10, pring(num));
```

 process 함수는 첫번재 인자로 몇까지 iteration을 돌 것인지를 매개변수로 받고 있고, 두번째 인자로 전달받은 값을 출력하라는 **함수**를 매개변수로 받고 있음

앞서 설명했듯 함수형 프로그래밍은 무엇을(What)에 포커스를 두는 프로그래밍이기 때문에 '**출력을 하는 함수**'를 파라미터로 넘길 수 있음

명령형 프로그래밍에서는 메소드를 호출하면 상황에 따라 내부의 값이 바뀔수 있음. 즉, 우리가 개발한 함수 내에서 선언된 변수의 메모리 할당된 값이 바뀌는 등의 변화가 발생할 수 있음

하지만 함수형 프로그래밍에서는 대입문이 없기 때문에 메모리에 한 번 할당된 값은 새로운 값으로 변할 수 없음



### 함수형 프로그래밍의 특징

> **부수 효과**가 없는 **순수 함수**를 **1급 객체**로 간주하여 파라미터나 반환값으로 사용할 수 있으며, **참조 투명성**을 지킬 수 있다.



#### 부수 효과 (Side Effect)

여기서 부수효과란 다음과 같은 변화 또는 변화가 발생하는 작업을 의미

- 변수의 값이 변경됨

- 자료 구조를 제자리에서 수정함

- 객체의 필드값을 설정함

- 예외나 오류가 발생하며 실행이 중단됨

- 콘솔 또는 파일 I/O가 발생함

  

#### 순수 함수 (Pure Function)

그리고 이러한 부수 효과들을 제거한 함수들을 순수함수라고 부르며, 함수형 프로그래밍에서 사용하는 함수는 이러한 순수 함수들임

- Memory or I/O의 관점에서 side effect가 없는 함수
- 함수의 실행이 외부에 영향을 끼치지 않는 함수

##### 순수 함수의 장점

- 함수 자체가 독립적이며 side effect 가 없기 때문에 Thread에 안전성을 보장받을 수 있음
- Thread에 안정성을 보장받아 병령 처리를 동기화 없이 진행할 수 있음



#### 1급 객체 (First-Class Object)

1급 객체란 다음과 같은 것들이 가능한 객체를 의미

- 변수나 데이터 구조 안에 담을 수 있음
- 파라미터로 전달할 수 있음
- 반환값으로 사용할 수 있음
- 할당에 사용된 이름과 무관하게 고유한 구별이 가능

함수형 프로그래밍에서 **함수는 1급 객체로 취급**받기 때문에 위의 예제에서처럼 함수를 파라미터로 넘기는 등의 작업이 가능한 것

또한 우리가 일반적으로 알고 개발했던 함수들은 함수형 프로그래밍에서 정의하는 순수 함수들과는 다르다는 것을 인지해야함



#### 참조 투명성 (Referential Transparency)

- 동일한 인자에 대해 항상 동일한 결과를 반환해야 함
- 참조 투명성을 통해 기존의 값은 변경되지 않고 유지됨(Immutable Data)

명령형 프로그래밍과 함수형 프로그래밍에서 사용하는 함수는 **부수효과의 유/무**에 따라 차이가 있음. 그에 따라 함수가 참조에 투명한지 아닌지 나뉘어짐.

참조에 투명하다는 것은 말 그대로 함수를 실행하여도 어떠한 상태의 변화없이 항상 동일한 결과를 반환하여 항상 동일하게(투명하게) 실행 결과를 참조(예측)할 수 있다는 것을 의미

**부작용을 제거하여 프로그램의 동작을 이해하고 예측을 용이**하게 하는 것은 함수형 프로그래밍으로 개발하려는 핵심 동기 중 하나임

그리고 이러한 부분인 병렬 처리 환경에서 개발할 때 Race Condition(경쟁 상태)에 대한 비용을 줄여줌. 함수형 프로그래밍에서는 값의 대입 없이 항상 동일한 실행에 대해 동일한 결과를 반환하기 때문



### Java에서의 함수형 프로그래밍

Java 8이 릴리즈 되면서 Java에서도 함수형 프로그래밍이 가능해짐

Java의 객체 지향은 명령형 프로그래밍이고, 함수형은 선언형 프로그래밍



#### Java에서 활용할 수 있는 함수형 프로그래밍

- 람다식
- stream API
- 함수형 인터페이스

Java 8에는 Stream API가 추가됨



#### Java를 이용한 함수형 프로그래밍 예시

어떤 단어 리스트가 있을 때 다음과 같은 문제가 주어졌다고 가정

> 1. 단어의 크기가 2 이상인 경우를 필터링함
> 2. 모든 단어를 대문자로 변환함
> 3. 모든 단어를 앞글자만 잘라내어 변환함
> 4. 모든 단어를 스페이스로 구분한 하나의 문자열로 합침



이러한 요구사항을 함수형 프로그래밍 없이 개발한다면 코드가 상당히 길어지고 복잡해짐.

하지만 함수형 프로그래밍을 적용한다면 해당 요구사항들 역시 비교적 간단하게 처리 가능. 

```java
public class WordProcessTest { 
	private final List<String> words = Arrays.asList("TONY", "a", "hULK", "B", "america", "X", "nebula", "Korea"); 
  
  @Test 
  void wordProcessTest() { 
    String result = words.stream() 
      .filter(w -> w.length() > 1) 
      .map(String::toUpperCase) 
      .map(w -> w.substring(0, 1)) 
      .collect(Collectors.joining(" ")); 
    
    assertThat(result).isEqualTo("T H A N K"); 
  } 
}
```

wordProcess 메소드 내부에서 filter나 map, collect 등과 같은 **함수의 파라미터로 함수가 전달**

각각의 함수로 넘어간 파라미터 함수는 다음의 역할을 함

- filter 파라미터로 넘어간 함수 : 주어진 문자열의 길이가 1인지를 판별
- 첫번째 map 파라미터로 넘어간 함수 : 주어진 문자열을 대문자로 변환함
- 두번째 map 파라미터로 넘어간 함수 : 주어진 문자열을 첫 단어만 잘라냄
- collect  파라미터로 넘어간 함수 : 주어진 문자열을 스페이스 간격으로 이어붙임



사용할 함수를 변수로 선언하는 것도 가능하며, 이 함수를 반환하는 것도 가능

```java
@Test 
void customFunction() { 
  Function<String, String> function = word -> word.toUpperCase();
  assertThat(function.apply("text")).isEqualTo("TEXT"); 
}
```



Java는 함수형 프로그래밍을 위한 이미 많은 구현체들을 만들어 두었으며, 다양한 API를 제공하고 있음

> [stream API 참고] <https://mangkyu.tistory.com/112>



---

[참고 1] : <https://mangkyu.tistory.com/111>

[참고 2] : <https://gyoogle.dev/blog/computer-science/software-engineering/Fuctional%20Programming.html>
