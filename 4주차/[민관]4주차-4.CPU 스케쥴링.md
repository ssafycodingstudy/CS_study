### CPU 스케쥴링

- CPU 자원을 프로세스에게 어떻게 배당할 것인지 결정하는 작업
- Multi-Processor 환경에서 Processor간 우선순위 지정해 CPU 활용 극대화



### 스케쥴링 평가 기준

1. CPU 사용율 극대화 : 전체 시스템 시간 중 CPU가 작업을 처리하는 시간의 비율
2. 처리능력 최대화 : CPU가 단위 시간당 처리하는 프로세스 개수
3. 응답시간 최소화 : 대화식 시스템에서 요청 후 응답이 오기 시작할 때 까지의 시간

4. 대기시간 최소화 : 프로세스가 준비 큐 내에서 대기하는 시간의 총합
5. 반환시간 최소화 : 프로세스가 시작해서 끝날 때까지 걸리는 시간



### 스케쥴러의 종류 및 역할

1. Scheduling Queue : 주기억장치의 할당을 기다림
2. 장기 스케쥴러 : 스케쥴러 우너칙에 따라 디스크 내의 작업을 어떤 순서로 메모리에 가져올지 결정 하는 프로그램

3. 중기 스케쥴러 : 메모리에서 CPU를 쓰기 위해 경쟁하고 있는 프로세스들을 몇 개 줄여 다중 프로그래밍의 정도를 완화, 이후 다시 메모리로 불러와 중단되었던 지점부터 다시 실행(스와핑 기법)

4. 단기 스케쥴러 : 어떤 작업이 시스템의 자원을 차지할 것인가를 결정



### 프로세스 스케쥴링 분류

1. 선점 스케쥴링

   - 선점 스케쥴링 기법은 한 프로세스가 CPU를 차지하고 있을 때 다른 프로세스가 현재 프로세스를 중지시키고 자신이 CPU를 차지할 수 있는 기법
   - OS가 프로세스 자원을 선점하고 있다는 뜻
   - 기법에는 RR(Round-Robin), SRT(Shortest-Remaining-Time), MLQ(Multi-Level Queue), MFQ(Multi-Level FeedBack Queue)

   

2. 비선점 스케쥴링
   - 한 프로세스가 CPU를 할당받으면 다른 프로세스는 CPU를 그 프로세스로부터 뺏을 수 없음
   - FCFS(First Come First Service), SJF(Shortest-Job-First), HRN(Highest Response-ratio Next)



### 프로세스 스케쥴링 알고리즘

1. SRT(Shortest Remaining Time) 스케쥴링
   - 가장 짧은 시간이 소요된다고 판단되는 프로세스를 먼저 수행
   - 남은 처리 시간이 더 짧다고 판단되는 프로세스가 준비 큐에 생기면 언제라도 프로세스가 선점
   - 긴 작업은 SJF보다 대기시간 긺



 	2. RR(Round Robin, 순환할당) 스케쥴링
     - 대화식 사용자를 위한 시분할 시스템을 위해 고안
     - 준비 큐(FCFS)에 의해 보내진 각 프로세스는 같은 크기의 CPU시간을 할당받음
     - 일정한 시간 할당량 만큼 CPU를 점유, 시간 할당량을 초과하면 다시 준비 큐로 되돌아옴
     - 시간 할당량 크기에 성능이 많은 영향 받음



3. MLQ(Multi-Level Queue, 다단계 큐) 스케쥴링
   - 각 작업들이 서로 다른 묶음으로 분류할 때 사용하는 알고리즘
   - 전면 작업은 후면 작업에 비해 높은 우선순위를 갖는 경우가 많음
   - 각 큐는 자신만의 독자적인 스케쥴링을 가지며 다른 큐로 작업 이동이 불가능



4. MFQ(Multi-Level Feedback Queue, 다단계 피드백 큐) 스케쥴링
   - 프로세스는 CPU 사용시간 따라 입출력 위주와 CPU 위주로 구분가능
   - 입출력 위주와 CPU위주인 프로세스의 특성 따라 큐마다 서로 다른 CPU Time Slice를 부여
   - 프로세스가 큐 사이를 이동하는 기법으로 새로운 프로세스는 높은 우선순위, 프로세스의 실행시간이 길어질수록 점점 낮은 우선순위 큐로 이동
   - 하위단계일수록 할당시간은 증가(공평성 부여)
   - UNIX 시스템은 다단계 피드백 큐 방식을 스케쥴링 알고리즘으로 채택



5. FCFS(First Come First Service) 스케쥴링 = FIFO
   - 가장 간단한 스케쥴링 알고리즘, FIFO 큐로 쉽게 관리 가능
   - 프로세스가 대기 큐에 도착한 순서에 따라 CPU가 할당
   - 다른 스케쥴링 알고리즘에 보조적으로 사용



6. SJF(Shortest Job First, 최소작업우선) 스케쥴링
   - 준비 큐 내의 작업 중 수행시간이 가장 짧다고 판단되는 것을 먼저 수행
   - 각 프로세스에서 CPU 버스트 길이를 비교하여 CPU가 이용 가능해지면 가장 작은 CPU 버스트를 가진 프로세스를 할당
   - 주어진 프로세스 집합에 대해서 평균대기시간이 최소가 되는 최적 알고리즘
   - CPU 요구시간이 긴 작업과 짧은 작업 간 불평등 심함, CPU 요구시간이 긴 프로세스는 기아(Starvation)이 발생하며 HRN 스케쥴링 사용



7. HRN(Highest Response ratio Next) 스케쥴링
   - SJF의 약점 보완, 긴 작업과 짧은 작업 간 불평등 완화
   - Response Ratio = [대기시간+서비스시간]/서비스 시간
   - 대기 중인 프로세스 중 현재 Response Ratio가 가장 높은 것을 선택